{"version":3,"sources":["bs-app/page.ts"],"names":[],"mappings":"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","file":"bs-app/page.js","sourcesContent":["import {\r\n    Component,\r\n    OnInit,\r\n    QueryList,\r\n    ViewChildren,\r\n    ElementRef,\r\n    AfterViewInit\r\n} from '@angular/core';\r\nimport { ActivatedRoute, Params } from '@angular/router';\r\n\r\nimport { MdSidenav } from '@angular2-material/sidenav';\r\n\r\nimport { Panels, WebsiteService, defaultNavbar } from 'core';\r\n\r\nimport { themes } from './themes';\r\n\r\n/**\r\n * 将json解析成对应的页面组件,并挂载到当前页面,当从编辑模式进入该页面的时候,则可以按Ctrl键呼出左侧的菜单面板\r\n */\r\n@Component({\r\n    moduleId: module.id,\r\n    selector: 'page',\r\n    templateUrl: './page.html',\r\n    styleUrls: ['./page.css']\r\n\r\n})\r\nexport class EveryPage implements OnInit, AfterViewInit {\r\n    panels = Panels;\r\n    page: Page;\r\n    path: string;\r\n    themes = themes;\r\n    user;\r\n\r\n    // 两侧边栏\r\n    @ViewChildren(MdSidenav) sidenavs: QueryList<MdSidenav>;\r\n    leftSidenav: MdSidenav;\r\n    rightSidenav: MdSidenav;\r\n    ngAfterViewInit() {\r\n        this.leftSidenav = this.sidenavs.first;\r\n        this.rightSidenav = this.sidenavs.last;\r\n    }\r\n\r\n\r\n\r\n    addNavbar() {\r\n        this.websiteService.addPart(this.page.path, defaultNavbar);\r\n    }\r\n\r\n    savePage() {\r\n        this.websiteService.userService.saveUser(this.websiteService.userService.user);\r\n    }\r\n\r\n    constructor(\r\n        public el: ElementRef,\r\n        public websiteService: WebsiteService,\r\n        public route: ActivatedRoute\r\n    ) {\r\n        this.route.params.forEach((params: Params) => {\r\n            this.path = params['path'];\r\n            this.page = this.websiteService.findPage(this.path);\r\n            console.log(`当前页面是${this.path},数据是${JSON.stringify(this.page)}`);\r\n        });\r\n        this.user = this.websiteService.userService.user;\r\n    }\r\n\r\n    fullScreen() {\r\n        // 若要全屏页面中div，var element= document.getElementById(\"divID\");\r\n        var el = document.documentElement;\r\n        // 切换全屏\r\n        var rfs = el['requestFullScreen'] ||\r\n            el['webkitRequestFullScreen'] ||\r\n            el['mozRequestFullScreen'] || el['msRequestFullscreen'];\r\n        if (typeof rfs != 'undefined' && rfs) {\r\n            rfs.call(el);\r\n        } else if (typeof window['ActiveXObject'] != 'undefined') {\r\n            // for Internet Explorer \r\n            var wscript = new window['ActiveXObject']('WScript.Shell');\r\n            if (wscript != null) {\r\n                wscript.SendKeys('{F11}');\r\n            }\r\n        }\r\n    }\r\n\r\n    ngOnInit() {\r\n        // 打开欢迎模态框\r\n        window['$'](this.el.nativeElement).find('#welcomeModal').modal('toggle');\r\n        // 消除导航栏上方的空格性问题，否则右边的侧边栏的导航栏会很长\r\n        // 滑动显示左侧边栏\r\n        var Hammer = window['Hammer'];\r\n        var bodyHammer = new Hammer(window['$']('body')[0], {\r\n            recognizers: [\r\n                // RecognizerClass, [options], [recognizeWith, ...], [requireFailure, ...]\r\n                [Hammer.Pan],\r\n                [Hammer.Rotate],\r\n                [Hammer.Pinch, { enable: false }, ['rotate']],\r\n                [Hammer.Swipe, { direction: Hammer.DIRECTION_LEFT }],\r\n            ]\r\n        });\r\n        // 打开左右两侧的侧边栏\r\n        bodyHammer.on('pan', (ev) => {\r\n            switch (ev.additionalEvent) {\r\n                case 'panright':\r\n                    if (this.rightSidenav._isOpened) {\r\n                        this.rightSidenav.close();\r\n                        return;\r\n                    }\r\n                    this.leftSidenav.open();\r\n                    break;\r\n                case 'panleft':\r\n                    if (this.leftSidenav._isOpened) {\r\n                        this.leftSidenav.close();\r\n                        return;\r\n                    }\r\n                    this.rightSidenav.open();\r\n                    break;\r\n            }\r\n        });\r\n    }\r\n\r\n    addPart(part) {\r\n        this.websiteService.addPart(this.path, part);\r\n    }\r\n\r\n    clearWebsite() {\r\n        this.websiteService.clearWebsite();\r\n    }\r\n\r\n}\r\n\r\n"],"sourceRoot":"/source/"}