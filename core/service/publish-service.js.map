{"version":3,"sources":["core/service/publish-service.ts"],"names":[],"mappings":";;;;;;;;;;AAAA,qBAA2B,eAAe,CAAC,CAAA;AAC3C,qBAAqD,MAAM,CAAC,CAAA;AAE5D;;GAEG;AAEH;IAAA;QACY,eAAU,GAAG,eAAQ,CAAC,QAAQ,EAAE,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC;QAChD,gBAAW,GAAG,IAAI,kBAAW,EAAE,CAAC;IAsB5C,CAAC;IApBG;;;OAGG;IACH,sCAAa,GAAb,UAAc,MAAc,EAAE,MAAc;QACxC,MAAM,CAAC,WAAW,GAAG,EAAE,QAAQ,EAAE,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,QAAQ,EAAE,MAAM,EAAE,MAAM,EAAE,CAAC;QAClF,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;IACjC,CAAC;IAED;;;OAGG;IACH,sCAAa,GAAb,UAAc,QAAwC;QAClD,IAAI,CAAC,UAAU,CAAC,EAAE,CAAC,OAAO,EAAE,UAAC,QAAQ;YACjC,IAAI,UAAU,GAAG,oBAAa,CAAC,QAAQ,CAAC,GAAG,EAAE,CAAC,CAAC;YAC/C,QAAQ,CAAC,UAAU,CAAC,CAAC;QACzB,CAAC,CAAC,CAAC;IACP,CAAC;IAvBL;QAAC,iBAAU,EAAE;;sBAAA;IAyBb,qBAAC;AAAD,CAxBA,AAwBC,IAAA;AAxBY,sBAAc,iBAwB1B,CAAA","file":"core/service/publish-service.js","sourcesContent":["import { Injectable } from '@angular/core';\r\nimport { UserService, firebase, objectToArray } from 'core';\r\n\r\n/**\r\n * 模块发布服务\r\n */\r\n@Injectable()\r\nexport class PublishService {\r\n    private publishRef = firebase.database().ref('publish');\r\n    private userService = new UserService();\r\n\r\n    /**\r\n     * publish navbar\r\n     * \r\n     */\r\n    publishNavbar(navbar: Navbar, commet: string) {\r\n        navbar.publishInfo = { username: this.userService.user.username, commet: commet };\r\n        this.publishRef.push(navbar);\r\n    }\r\n\r\n    /**\r\n     * 获取发布的导航列表,传入回调函数\r\n     * \r\n     */\r\n    getNavbarList(callback: (navbarList: Navbar[]) => void) {\r\n        this.publishRef.on('value', (snapshot) => {\r\n            var navbarList = objectToArray(snapshot.val());\r\n            callback(navbarList);\r\n        });\r\n    }\r\n\r\n}\r\n\r\n"],"sourceRoot":"/source/"}